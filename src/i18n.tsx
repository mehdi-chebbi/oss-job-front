import { createContext, useContext, useMemo } from 'react';
import type { ReactNode } from 'react';
import { useLocation } from 'react-router-dom';

export type Language = 'en' | 'fr';

type Translations = Record<string, string>;

const en: Translations = {
  'app.brand.title': 'OSS Opportunities',
  'app.brand.subtitle': 'Sahara and Sahel Observatory',
  "rh.selectAll": "Select All",
  "rh.deselectAll": "Deselect All", 
  "rh.selected": "selected",
  "rh.clearSelection": "Clear Selection",
  "rh.downloadSelected": "Download Selected",
  "rh.downloading": "Downloading...",
  "rh.alert.noApplicationsSelected": "Please select applications to download",
  "rh.alert.bulkDownloadError": "Error creating bulk download",
  
  'nav.about': 'About Us',
  'nav.login': 'Login',
  'nav.logout': 'Logout',
  'nav.welcome': 'Welcome back,',
  'nav.dashboard': 'Dashboard',
  'nav.hr': 'Committee Management',
  'nav.admin': 'Administration',

  'role.admin': 'Administrator',
  'role.comite_ajout': 'Comité d\'Ajout',
  'role.comite_ouverture': 'Comité d\'Ouverture',
  
  // Comité d'ajout dashboard translations
  'comite_ajout.dashboard.title': 'Comité d\'Ajout Dashboard',
  'comite_ajout.dashboard.subtitle': 'Manage offers, departments, and projects',
  
  // Comité d'ouverture dashboard translations
  'comite_ouverture.dashboard.title': 'Comité d\'Ouverture Dashboard',
  'comite_ouverture.dashboard.subtitle': 'View and manage candidate applications',
  
  // Admin dashboard translations
  'admin.title': 'Manage Users',
  'admin.subtitle': 'Create, edit, and manage system users',
  'admin.createUser': 'Create User',
  'admin.editUser': 'Edit User',
  'admin.createNewUser': 'Create New User',

  'footer.quickLinks': 'Quick Links',
  'footer.about': 'About OSS',
  'footer.currentOpportunities': 'Current Opportunities',
  'footer.applicationProcess': 'Application Process',
  'footer.contactUs': 'Contact Us',
  'footer.contactInformation': 'Contact Information',
  'footer.location': 'Tunis, Tunisia',
  'footer.privacy': 'Privacy Policy',
  'footer.terms': 'Terms of Service',
  'footer.accessibility': 'Accessibility',
  'footer.copyright': 'All rights reserved.',

  'home.hero.badge': 'Founded 1992 • Based in Tunis since 2000',
  'home.hero.cta': 'View Current Opportunities',
  'home.section.badge': 'Career Opportunities',
  'home.section.title': 'Current Opportunities',
  'home.section.subtitle': "Help us build a resilient and sustainable future for Africa's drylands.",

  'filters.title': 'Filter Opportunities',
  'filters.toggle.show': 'Show Filters',
  'filters.toggle.hide': 'Hide Filters',
  'filters.search': 'Search',
  'filters.search.placeholder': 'Search opportunities...',
  'filters.type': 'Type',
  'filters.type.all': 'All Types',
  'filters.country': 'Country',
  'filters.country.all': 'All Countries',
  'filters.department': 'Department',
  'filters.department.all': 'All Departments',
  'filters.status': 'Status',
  'filters.status.ongoing': 'Ongoing',
  'filters.status.closed': 'Closed',

  'label.reference': 'Reference',
  'label.country': 'Country',
  'label.department': 'Department',
  'label.project': 'Project',
  'label.deadline': 'Deadline',
  'label.documents': 'Documents',
  'label.description': 'Description',

  'offer.expired': 'Expired',
  'offer.closes': 'Closes:',
  'offer.learnMore': 'Learn More',
  'offer.downloadTdr': 'Download TDR (PDF)',
  'offer.downloadTdr.error': 'Failed to download TDR',

  'detail.backToHome': 'Back to Home',
  'detail.backToOpps': 'Back to Opportunities',
  'detail.details': 'Offer Details',
  'detail.notFound.title': 'Offer Not Found',
  'detail.notFound.text': "The offer you're looking for doesn't exist or has been removed.",

  'login.title': 'Login to OSS Platform',
  'login.email': 'Email Address',
  'login.password': 'Password',
  'login.cancel': 'Cancel',
  'login.submit': 'Sign In',
  'login.error.failed': 'Login failed',
  'login.error.network': 'Failed to connect to server',

  'apply.submit.title': 'Submit Application',
  'apply.submitted.title': 'Application Submitted!',
  'apply.submitted.text': 'Thank you for applying.',
  'apply.button': 'Apply Now',

  // Application Form translations
  'form.fullName': 'Full Name',
  'form.email': 'Email',
  'form.country': 'Country',
  'form.country.placeholder': 'Start typing to search...',
  'form.country.selectFirst': 'Select a country first',
  'form.country.selectFirstHelp': 'Please select a country first',
  'form.phoneNumber': 'Phone Number',
  'form.phoneNumber.placeholder': 'Enter your phone number',
  'form.cv': 'Upload CV (PDF)',
  'form.diploma': 'Upload Diploma (PDF)',
  'form.idCard': 'Upload ID Card (PDF)',
  'form.coverLetter': 'Upload Cover Letter (PDF)',
  'form.additionalDocs': 'Additional Required Documents',
  'form.declarationHonneur': 'Declaration sur l\'Honneur (PDF)',
  'form.ficheReferencement': 'Fiche de Referencement (PDF)',
  'form.extraitRegistre': 'Extrait Registre National (PDF)',
  'form.noteMethodologique': 'Note Methodologique (PDF)',
  'form.listeReferences': 'Liste des References (PDF)',
  'form.offreFinanciere': 'Offre Financiere (PDF)',
  'form.cancel': 'Cancel',
  'form.submit': 'Submit Application',
  'form.submitting': 'Submitting...',
  'form.error.required': 'Please upload a',
  'form.error.additionalRequired': 'Please upload a',
  'form.error.forOfferType': 'PDF for this offer type',
  'form.error.submitFailed': 'Failed to submit application',
  'form.error.applicationFailed': 'Application failed',

  'about.badge': 'International Organization • African Vocation',
  'about.title': 'About the',
  'about.p1': 'The Sahara and Sahel Observatory (OSS) is an international organization with an African vocation, founded in 1992 and based in Tunis since 2000. It mainly works on creating and supporting partnerships to jointly address the challenges related to water resources management, as well as the implementation of international agreements on land degradation, biodiversity and climate change in Africa.',
  'about.p2': 'Today, the OSS has 28 African and 7 non-African member countries. In addition, the Organization collaborates with 12 entities representatives of West, East and North Africa, as well as several UN agencies and non-governmental Organizations.',
  'about.p3': 'Our mission is to help African member countries sustainably manage their natural resources, with focus on arid, semi-arid and dry sub-humid areas of Africa in a particularly disadvantageous climate change context.',
  'about.p4': 'OSS develops concepts and methodologies for environmental monitoring, natural resources management and climate change adaptation, based on our four scientific programs: Land, Water, Climate, and Biodiversity.',
  'about.mission.title': 'Our Mission',
  'about.mission.item1': 'Implementation of multilateral agreements on land degradation, biodiversity and climate change',
  'about.mission.item2': 'Promotion of regional and international initiatives addressing environmental challenges',
  'about.mission.item3': 'Alignment of approaches and unification of methodologies for sustainable land and water management',
  'about.impact.title': 'Our Impact',
  'about.impact.item1': 'Accredited by Green Climate Fund & Adaptation Fund',
  'about.impact.item2': '12+ regional partnerships across Africa',

  'rh.tabs.offers': 'Offers',
  'rh.tabs.applications': 'Applications',
  'rh.manage.title': 'Manage Offers',
  'rh.manage.subtitle': 'Create, edit, and manage your offers',
  'rh.createNew': 'Create New Offer',
  'rh.filter.offers': 'Filter Offers',
  'rh.filter.applications': 'Filter Applications',
  'rh.toggle.show': 'Show Filters',
  'rh.toggle.hide': 'Hide Filters',
  'rh.search': 'Search',
  'rh.search.offers.placeholder': 'Search offers...',
  'rh.search.applications.placeholder': 'Search applications...',
  'rh.type': 'Type',
  'rh.allTypes': 'All Types',
  'rh.country': 'Country',
  'rh.allCountries': 'All Countries',
  'rh.department': 'Department',
  'rh.allDepartments': 'All Departments',
  'rh.status': 'Status',
  'rh.clearAll': 'Clear All Filters',
  'rh.editOffer': 'Edit Offer',
  'rh.createOffer': 'Create New Offer',
  'rh.table.edit': 'Edit',
  'rh.table.delete': 'Delete',
  'rh.noOffers.title': 'No offers match your filters',
  'rh.noOffers.subtitle': 'Try adjusting your filter criteria or create a new offer',
  'rh.noApplications.title': 'No applications match your filters',
  'rh.noApplications.subtitle': 'Try adjusting your filter criteria or check back later for new applications.',
  'rh.viewDetails': 'View Details',
  'rh.modal.appFrom': 'Application from',
  'rh.modal.appliedFor': 'Applied for:',
  'rh.label.email': 'Email Address',
  'rh.label.phone': 'Phone Number',
  'rh.label.country': 'Country',
  'rh.label.offerType': 'Offer Type',
  'rh.documents.title': 'Application Documents',
  'rh.modal.close': 'Close',
  'rh.error.fetchOffers': 'Failed to fetch offers',
  'rh.error.fetchApplications': 'Failed to fetch applications',
  'rh.error.saveOffer': 'Failed to save offer',
  'rh.alert.fetchDocumentFail': 'Failed to download document',
  'rh.confirm.deleteOffer': 'Delete this offer?',
  'rh.confirm.deleteApplication': 'Delete this application?',
  
  // RH Dashboard additional translations
  'rh.management.title': 'Department & Project Management',
  'rh.error.deleteOffer': 'Failed to delete offer',
  'rh.applications.subtitle': 'Application summary for your offers',
  'rh.statistics.totalOffers': 'Total Offers:',
  'rh.statistics.activeOffers': 'Active Offers:',
  'rh.statistics.expiredOffers': 'Expired Offers:',
  'rh.filterApplications': 'Filter Applications',
  'rh.searchLabel': 'Search',
  'rh.searchOffersPlaceholder': 'Search offers...',
  'rh.offerTypeLabel': 'Offer Type',
  'rh.departmentLabel': 'Department',
  'rh.statusLabel': 'Status',
  'rh.allStatuses': 'All Statuses',
  'rh.clearAllFilters': 'Clear All Filters',
  'rh.noApplicationsFound': 'No Applications Found',
  'rh.noApplicationsDescription': "You don't have any applications for your offers yet.",
  'rh.status.active': 'Active',
  'rh.status.expired': 'Expired',
  'rh.daysLeft': 'days left',
  'rh.projectLabel': 'Project:',
  'rh.applicationsLabel': 'Applications:',
  'rh.deadlineLabel': 'Deadline:',
  'rh.archiveApplications': 'Archive Applications',
  'rh.error.fetchApplicationSummary': 'Failed to fetch application summary',
  'rh.error.archiveApplications': 'Failed to archive applications',
  'rh.archiveWindow.open': 'Archive window open',
  'rh.archiveWindow.closesIn': 'Archive closes in {count} days',
  'rh.archiveWindow.closed': 'Archive window closed',
  'rh.archiveWindow.closedDescription': 'Archive window has closed for this offer',
  'rh.confirm.archiveApplications': 'Are you sure you want to archive all applications for "{offerTitle}"? This will download all candidate documents and mark them as archived.',
  'rh.success.archivedApplications': 'Successfully archived {count} applications for "{offerTitle}"',
  
  // Department & Project Management translations
  'rh.management.subtitle': 'Manage your departments and projects',
  'rh.statistics.departments': 'Departments:',
  'rh.statistics.projects': 'Projects:',
  'rh.management.departmentsTab': 'Departments',
  'rh.management.projectsTab': 'Projects',
  'rh.management.addDepartment': 'Add Department',
  'rh.management.addProject': 'Add Project',
  'rh.management.noDepartments': 'No Departments',
  'rh.management.noDepartmentsDesc': 'Create your first department to organize your projects.',
  'rh.management.noProjects': 'No Projects',
  'rh.management.noProjectsDescDepts': 'Create departments first, then add projects to them.',
  'rh.management.noProjectsDesc': 'Create your first project to organize your job offers.',
  'rh.management.editDepartment': 'Edit Department',
  'rh.management.addNewDepartment': 'Add New Department',
  'rh.management.editProject': 'Edit Project',
  'rh.management.addNewProject': 'Add New Project',
  'rh.management.nameRequired': 'Name *',
  'rh.management.enterDepartmentName': 'Enter department name',
  'rh.management.enterProjectName': 'Enter project name',
  'rh.management.departmentRequired': 'Department *',
  'rh.management.selectDepartment': 'Select a department',
  'rh.management.unknownDepartment': 'Unknown Department',
  'rh.management.cancel': 'Cancel',
  'rh.management.update': 'Update',
  'rh.management.create': 'Create',
  'rh.management.projectsLabel': 'Projects:',
  'rh.management.cannotDeleteDeptWithProjects': 'Cannot delete department with existing projects',
  'rh.validation.departmentNameRequired': 'Department name is required',
  'rh.validation.projectNameAndDepartmentRequired': 'Project name and department are required',
  'rh.confirm.deleteDepartment': 'Are you sure you want to delete this department? This will also delete all projects under this department.',
  'rh.confirm.deleteProject': 'Are you sure you want to delete this project?',
  'rh.error.saveDepartment': 'Failed to save department',
  'rh.error.deleteDepartment': 'Failed to delete department',
  'rh.error.saveProject': 'Failed to save project',
  'rh.error.deleteProject': 'Failed to delete project',
  'rh.error.loadData': 'Failed to load data',
  
  // Offer form translations
  'rh.offer.editTitle': 'Edit Offer',
  'rh.offer.editSubtitle': 'Update the offer details below',
  'rh.offer.backToDashboard': 'Back to Dashboard',
  'rh.offer.offerTypeRequired': 'Offer Type *',
  'rh.offer.referenceRequired': 'Reference *',
  'rh.offer.titleRequired': 'Title *',
  'rh.offer.descriptionRequired': 'Description *',
  'rh.offer.departmentRequired': 'Department *',
  'rh.offer.projectRequired': 'Project *',
  'rh.offer.countryRequired': 'Country *',
  'rh.offer.deadlineRequired': 'Deadline *',
  'rh.offer.notificationEmails': 'Notification Emails',
  'rh.offer.selectDepartment': 'Select a department',
  'rh.offer.selectProject': 'Select a project',
  'rh.validation.departmentAndProjectRequired': 'Please select both department and project',
  'rh.error.updateOffer': 'Failed to update offer',
  
  // Offer creation translations
  'rh.offer.createTitle': 'Create New Offer',
  'rh.offer.createSubtitle': 'Fill in the offer details below',
  'rh.error.createOffer': 'Failed to create offer',
  
  // Offer form field translations
  'rh.form.type': 'Type',
  'rh.form.title': 'Title',
  'rh.form.reference': 'Reference',
  'rh.form.description': 'Description',
  'rh.form.descriptionPlaceholder': 'Enter detailed description...',
  'rh.form.country': 'Country',
  'rh.form.countryPlaceholder': 'Start typing to search...',
  'rh.form.department': 'Department',
  'rh.form.departmentRequired': 'Department *',
  'rh.form.project': 'Project',
  'rh.form.projectRequired': 'Project *',
  'rh.form.deadline': 'Deadline',
  'rh.form.tdrDocument': 'TDR Document (PDF)',
  'rh.form.tdrOptional': 'Optional: Upload Terms of Reference document (PDF only)',
  'rh.form.notificationEmails': 'Notification Emails',
  'rh.form.emailsCount': '{count} of 10 emails',
  'rh.form.addEmail': 'Add Email',
  'rh.form.emailPlaceholder': 'Enter email address {index}',
  'rh.form.emailsDescription': 'These email addresses will be notified when the offer is about to expire.',
  'rh.form.maxEmailsReached': 'Maximum of 10 notification emails reached',
  'rh.form.cancel': 'Cancel',
  'rh.form.createOffer': 'Create Offer',
  'rh.form.updateOffer': 'Update Offer',
  'rh.form.loading': 'Loading...',
  'rh.form.noDepartmentsAvailable': 'No departments available',
  'rh.form.selectDepartment': 'Select a department...',
  'rh.form.noDepartmentsHelp': 'No departments available. Please create departments first.',
  'rh.form.noProjectsAvailable': 'No projects available',
  'rh.form.selectProject': 'Select a project...',
  'rh.form.selectDepartmentFirst': 'Select a department first',
  'rh.form.noProjectsHelp': 'No projects available in this department. Please create projects first.',
  'rh.form.validation.selectDepartment': 'Please select a department',
  'rh.form.validation.selectProject': 'Please select a project',
  'rh.form.validation.validEmails': 'Please enter valid email addresses for all notification emails.',
  'rh.form.error.saveOffer': 'Failed to save offer',
  'rh.form.error.network': 'Network error while saving offer',
  
  // User form translations
  'user.form.nameRequired': 'Name is required',
  'user.form.emailRequired': 'Email is required',
  'user.form.invalidEmail': 'Invalid email',
  'user.form.passwordMinLength': 'Min 6 chars',
  'user.form.passwordsMustMatch': 'Passwords must match',
  'user.form.enterFullName': 'Enter full name',
  'user.form.emailAddress': 'Email Address',
  'user.form.enterEmailAddress': 'Enter email address',
  'user.form.role': 'Role',
  'user.form.password': 'Password',
  'user.form.leaveBlankToKeep': 'Leave blank to keep current password',
  'user.form.enterPassword': 'Enter password',
  'user.form.confirmPassword': 'Confirm Password',
  'user.form.reEnterPassword': 'Re-enter password',
  'user.form.cancel': 'Cancel',
  'user.form.updateUser': 'Update User',
  'user.form.createUser': 'Create User',
};

const fr: Translations = {
  'app.brand.title': 'OSS Opportunities',
  'app.brand.subtitle': 'Observatoire du Sahara et du Sahel',
  "rh.selectAll": "Tout sélectionner",
  "rh.deselectAll": "Tout désélectionner",
  "rh.selected": "sélectionné(s)",
  "rh.clearSelection": "Effacer la sélection",
  "rh.downloadSelected": "Télécharger la sélection",
  "rh.downloading": "Téléchargement...",
  "rh.alert.noApplicationsSelected": "Veuillez sélectionner des candidatures à télécharger",
  "rh.alert.bulkDownloadError": "Erreur lors de la création du téléchargement groupé",
  
  'nav.about': 'À propos',
  'nav.login': 'Se connecter',
  'nav.logout': 'Se déconnecter',
  'nav.welcome': 'Bon retour,',
  'nav.dashboard': 'Tableau de bord',
  'nav.hr': 'Gestion des Comités',
  'nav.admin': 'Administration',

  'role.admin': 'Administrateur',
  'role.comite_ajout': 'Comité d\'Ajout',
  'role.comite_ouverture': 'Comité d\'Ouverture',
  
  // Comité d'ajout dashboard translations
  'comite_ajout.dashboard.title': 'Tableau de bord - Comité d\'Ajout',
  'comite_ajout.dashboard.subtitle': 'Gérer les offres, départements et projets',
  
  // Comité d'ouverture dashboard translations
  'comite_ouverture.dashboard.title': 'Tableau de bord - Comité d\'Ouverture',
  'comite_ouverture.dashboard.subtitle': 'Voir et gérer les candidatures des candidats',
  
  // Admin dashboard translations
  'admin.title': 'Gérer les utilisateurs',
  'admin.subtitle': 'Créer, modifier et gérer les utilisateurs du système',
  'admin.createUser': 'Créer un utilisateur',
  'admin.editUser': 'Modifier l\'utilisateur',
  'admin.createNewUser': 'Créer un nouvel utilisateur',

  'footer.quickLinks': 'Liens rapides',
  'footer.about': "À propos de l'OSS",
  'footer.currentOpportunities': 'Opportunités en cours',
  'footer.applicationProcess': 'Processus de candidature',
  'footer.contactUs': 'Contactez-nous',
  'footer.contactInformation': 'Coordonnées',
  'footer.location': 'Tunis, Tunisie',
  'footer.privacy': 'Politique de confidentialité',
  'footer.terms': "Conditions d'utilisation",
  'footer.accessibility': 'Accessibilité',
  'footer.copyright': 'Tous droits réservés.',

  'home.hero.badge': 'Fondée en 1992 • Basée à Tunis depuis 2000',
  'home.hero.cta': 'Voir les opportunités en cours',
  'home.section.badge': 'Opportunités de carrière',
  'home.section.title': 'Opportunités actuelles',
  'home.section.subtitle': "Aidez-nous à construire un avenir résilient et durable pour les zones arides d'Afrique.",

  'filters.title': 'Filtrer les opportunités',
  'filters.toggle.show': 'Afficher les filtres',
  'filters.toggle.hide': 'Masquer les filtres',
  'filters.search': 'Recherche',
  'filters.search.placeholder': 'Rechercher des opportunités…',
  'filters.type': 'Type',
  'filters.type.all': 'Tous les types',
  'filters.country': 'Pays',
  'filters.country.all': 'Tous les pays',
  'filters.department': 'Département',
  'filters.department.all': 'Tous les départements',
  'filters.status': 'Statut',
  'filters.status.ongoing': 'En cours',
  'filters.status.closed': 'Clôturé',

  'label.reference': 'Référence',
  'label.country': 'Pays',
  'label.department': 'Département',
  'label.project': 'Projet',
  'label.deadline': 'Date limite',
  'label.documents': 'Documents',
  'label.description': 'Description',

  'offer.expired': 'Expiré',
  'offer.closes': 'Clôture :',
  'offer.learnMore': 'En savoir plus',
  'offer.downloadTdr': 'Télécharger TDR (PDF)',
  'offer.downloadTdr.error': 'Échec du téléchargement du TDR',

  'detail.backToHome': "Retour à l'accueil",
  'detail.backToOpps': 'Retour aux opportunités',
  'detail.details': "Détails de l'offre",
  'detail.notFound.title': 'Offre introuvable',
  'detail.notFound.text': "L'offre que vous recherchez n'existe pas ou a été supprimée.",

  'login.title': "Se connecter à la plateforme OSS",
  'login.email': 'Adresse e-mail',
  'login.password': 'Mot de passe',
  'login.cancel': 'Annuler',
  'login.submit': 'Se connecter',
  'login.error.failed': 'Échec de la connexion',
  'login.error.network': 'Échec de la connexion au serveur',

  'apply.submit.title': 'Soumettre la candidature',
  'apply.submitted.title': 'Candidature envoyée !',
  'apply.submitted.text': 'Merci pour votre candidature.',
  'apply.button': 'Postuler maintenant',

  // Application Form translations
  'form.fullName': 'Nom complet',
  'form.email': 'E-mail',
  'form.country': 'Pays',
  'form.country.placeholder': 'Commencez à taper pour rechercher...',
  'form.country.selectFirst': 'Sélectionnez d\'abord un pays',
  'form.country.selectFirstHelp': 'Veuillez d\'abord sélectionner un pays',
  'form.phoneNumber': 'Numéro de téléphone',
  'form.phoneNumber.placeholder': 'Entrez votre numéro de téléphone',
  'form.cv': 'Télécharger CV (PDF)',
  'form.diploma': 'Télécharger Diplôme (PDF)',
  'form.idCard': 'Télécharger Carte d\'identité (PDF)',
  'form.coverLetter': 'Télécharger Lettre de motivation (PDF)',
  'form.additionalDocs': 'Documents supplémentaires requis',
  'form.declarationHonneur': 'Déclaration sur l\'honneur (PDF)',
  'form.ficheReferencement': 'Fiche de référencement (PDF)',
  'form.extraitRegistre': 'Extrait registre national (PDF)',
  'form.noteMethodologique': 'Note méthodologique (PDF)',
  'form.listeReferences': 'Liste des références (PDF)',
  'form.offreFinanciere': 'Offre financière (PDF)',
  'form.cancel': 'Annuler',
  'form.submit': 'Soumettre la candidature',
  'form.submitting': 'Envoi en cours...',
  'form.error.required': 'Veuillez télécharger un',
  'form.error.additionalRequired': 'Veuillez télécharger un',
  'form.error.forOfferType': 'PDF pour ce type d\'offre',
  'form.error.submitFailed': 'Échec de l\'envoi de la candidature',
  'form.error.applicationFailed': 'Candidature échouée',

  'about.badge': 'Organisation internationale • Vocation africaine',
  'about.title': "À propos de l'",
  'about.p1': "L'Observatoire du Sahara et du Sahel (OSS) est une organisation internationale à vocation africaine, créée en 1992 et basée à Tunis depuis 2000. Elle œuvre principalement à la création et à l'appui de partenariats pour faire face conjointement aux défis liés à la gestion des ressources en eau, ainsi qu'à la mise en œuvre des accords internationaux relatifs à la désertification, à la biodiversité et au changement climatique en Afrique.",
  'about.p2': "Aujourd'hui, l'OSS compte 28 pays africains et 7 pays non africains membres. Par ailleurs, l'Organisation collabore avec 12 entités représentatives de l'Afrique de l'Ouest, de l'Est et du Nord, ainsi qu'avec plusieurs agences onusiennes et organisations non gouvernementales.",
  'about.p3': "Notre mission est d'aider les pays membres africains à gérer durablement leurs ressources naturelles, en mettant l'accent sur les zones arides, semi-arides et subhumides sèches d'Afrique, dans un contexte de changement climatique particulièrement défavorable.",
  'about.p4': "L'OSS développe des concepts et des méthodologies pour le suivi environnemental, la gestion des ressources naturelles et l'adaptation au changement climatique, sur la base de nos quatre programmes scientifiques : Terre, Eau, Climat et Biodiversité.",
  'about.mission.title': 'Notre mission',
  'about.mission.item1': 'Mise en œuvre des accords multilatéraux sur la dégradation des terres, la biodiversité et le changement climatique',
  'about.mission.item2': 'Promotion des initiatives régionales et internationales face aux défis environnementaux',
  'about.mission.item3': 'Alignement des approches et harmonisation des méthodologies pour une gestion durable des terres et de l\'eau',
  'about.impact.title': 'Notre impact',
  'about.impact.item1': 'Accréditée par le Fonds vert pour le climat et le Fonds d\'adaptation',
  'about.impact.item2': '12+ partenariats régionaux à travers l\'Afrique',

  'rh.tabs.offers': 'Offres',
  'rh.tabs.applications': 'Candidatures',
  'rh.manage.title': 'Gérer les offres',
  'rh.manage.subtitle': 'Créer, modifier et gérer vos offres',
  'rh.createNew': 'Créer une offre',
  'rh.filter.offers': 'Filtrer les offres',
  'rh.filter.applications': 'Filtrer les candidatures',
  'rh.toggle.show': 'Afficher les filtres',
  'rh.toggle.hide': 'Masquer les filtres',
  'rh.search': 'Recherche',
  'rh.search.offers.placeholder': 'Rechercher des offres…',
  'rh.search.applications.placeholder': 'Rechercher des candidatures…',
  'rh.type': 'Type',
  'rh.allTypes': 'Tous les types',
  'rh.country': 'Pays',
  'rh.allCountries': 'Tous les pays',
  'rh.department': 'Département',
  'rh.allDepartments': 'Tous les départements',
  'rh.status': 'Statut',
  'rh.clearAll': 'Effacer tous les filtres',
  'rh.editOffer': "Modifier l'offre",
  'rh.createOffer': 'Créer une offre',
  'rh.table.edit': 'Modifier',
  'rh.table.delete': 'Supprimer',
  'rh.noOffers.title': "Aucune offre ne correspond à vos filtres",
  'rh.noOffers.subtitle': 'Essayez d\'ajuster vos critères de filtre ou créez une nouvelle offre',
  'rh.noApplications.title': 'Aucune candidature ne correspond à vos filtres',
  'rh.noApplications.subtitle': 'Essayez d\'ajuster vos critères de filtre ou revenez plus tard pour de nouvelles candidatures.',
  'rh.viewDetails': 'Voir les détails',
  'rh.modal.appFrom': 'Candidature de',
  'rh.modal.appliedFor': 'Pour le poste :',
  'rh.label.email': 'Adresse e-mail',
  'rh.label.phone': 'Numéro de téléphone',
  'rh.label.country': 'Pays',
  'rh.label.offerType': "Type d'offre",
  'rh.documents.title': 'Documents de la candidature',
  'rh.modal.close': 'Fermer',
  'rh.error.fetchOffers': 'Échec du chargement des offres',
  'rh.error.fetchApplications': 'Échec du chargement des candidatures',
  'rh.error.saveOffer': "Échec de l'enregistrement de l'offre",
  'rh.alert.fetchDocumentFail': 'Échec du téléchargement du document',
  'rh.confirm.deleteOffer': 'Supprimer cette offre ?',
  'rh.confirm.deleteApplication': 'Supprimer cette candidature ?',
  
  // RH Dashboard additional translations
  'rh.management.title': 'Gestion des Départements et Projets',
  'rh.error.deleteOffer': 'Échec de la suppression de l\'offre',
  'rh.applications.subtitle': 'Résumé des candidatures pour vos offres',
  'rh.statistics.totalOffers': 'Total des offres :',
  'rh.statistics.activeOffers': 'Offres actives :',
  'rh.statistics.expiredOffers': 'Offres expirées :',
  'rh.filterApplications': 'Filtrer les candidatures',
  'rh.searchLabel': 'Recherche',
  'rh.searchOffersPlaceholder': 'Rechercher des offres…',
  'rh.offerTypeLabel': "Type d'offre",
  'rh.departmentLabel': 'Département',
  'rh.statusLabel': 'Statut',
  'rh.allStatuses': 'Tous les statuts',
  'rh.clearAllFilters': 'Effacer tous les filtres',
  'rh.noApplicationsFound': 'Aucune candidature trouvée',
  'rh.noApplicationsDescription': 'Vous n\'avez pas encore de candidatures pour vos offres.',
  'rh.status.active': 'Actif',
  'rh.status.expired': 'Expiré',
  'rh.daysLeft': 'jours restants',
  'rh.projectLabel': 'Projet :',
  'rh.applicationsLabel': 'Candidatures :',
  'rh.deadlineLabel': 'Date limite :',
  'rh.archiveApplications': 'Archiver les candidatures',
  'rh.error.fetchApplicationSummary': 'Échec du chargement du résumé des candidatures',
  'rh.error.archiveApplications': 'Échec de l\'archivage des candidatures',
  'rh.archiveWindow.open': 'Fenêtre d\'archivage ouverte',
  'rh.archiveWindow.closesIn': 'L\'archivage se ferme dans {count} jours',
  'rh.archiveWindow.closed': 'Fenêtre d\'archivage fermée',
  'rh.archiveWindow.closedDescription': 'La fenêtre d\'archivage est fermée pour cette offre',
  'rh.confirm.archiveApplications': 'Êtes-vous sûr de vouloir archiver toutes les candidatures pour "{offerTitle}" ? Cela téléchargera tous les documents des candidats et les marquera comme archivées.',
  'rh.success.archivedApplications': '{count} candidatures archivées avec succès pour "{offerTitle}"',
  
  // Department & Project Management translations
  'rh.management.subtitle': 'Gérer vos départements et projets',
  'rh.statistics.departments': 'Départements :',
  'rh.statistics.projects': 'Projets :',
  'rh.management.departmentsTab': 'Départements',
  'rh.management.projectsTab': 'Projets',
  'rh.management.addDepartment': 'Ajouter un département',
  'rh.management.addProject': 'Ajouter un projet',
  'rh.management.noDepartments': 'Aucun département',
  'rh.management.noDepartmentsDesc': 'Créez votre premier département pour organiser vos projets.',
  'rh.management.noProjects': 'Aucun projet',
  'rh.management.noProjectsDescDepts': 'Créez d\'abord des départements, puis ajoutez des projets à ceux-ci.',
  'rh.management.noProjectsDesc': 'Créez votre premier projet pour organiser vos offres d\'emploi.',
  'rh.management.editDepartment': 'Modifier le département',
  'rh.management.addNewDepartment': 'Ajouter un nouveau département',
  'rh.management.editProject': 'Modifier le projet',
  'rh.management.addNewProject': 'Ajouter un nouveau projet',
  'rh.management.nameRequired': 'Nom *',
  'rh.management.enterDepartmentName': 'Entrez le nom du département',
  'rh.management.enterProjectName': 'Entrez le nom du projet',
  'rh.management.departmentRequired': 'Département *',
  'rh.management.selectDepartment': 'Sélectionner un département',
  'rh.management.unknownDepartment': 'Département inconnu',
  'rh.management.cancel': 'Annuler',
  'rh.management.update': 'Mettre à jour',
  'rh.management.create': 'Créer',
  'rh.management.projectsLabel': 'Projets :',
  'rh.management.cannotDeleteDeptWithProjects': 'Impossible de supprimer un département avec des projets existants',
  'rh.validation.departmentNameRequired': 'Le nom du département est requis',
  'rh.validation.projectNameAndDepartmentRequired': 'Le nom du projet et le département sont requis',
  'rh.confirm.deleteDepartment': 'Êtes-vous sûr de vouloir supprimer ce département ? Cela supprimera également tous les projets sous ce département.',
  'rh.confirm.deleteProject': 'Êtes-vous sûr de vouloir supprimer ce projet ?',
  'rh.error.saveDepartment': 'Échec de l\'enregistrement du département',
  'rh.error.deleteDepartment': 'Échec de la suppression du département',
  'rh.error.saveProject': 'Échec de l\'enregistrement du projet',
  'rh.error.deleteProject': 'Échec de la suppression du projet',
  'rh.error.loadData': 'Échec du chargement des données',
  
  // Offer form translations
  'rh.offer.editTitle': "Modifier l'offre",
  'rh.offer.editSubtitle': 'Mettez à jour les détails de l\'offre ci-dessous',
  'rh.offer.backToDashboard': 'Retour au tableau de bord',
  'rh.offer.offerTypeRequired': "Type d'offre *",
  'rh.offer.referenceRequired': 'Référence *',
  'rh.offer.titleRequired': 'Titre *',
  'rh.offer.descriptionRequired': 'Description *',
  'rh.offer.departmentRequired': 'Département *',
  'rh.offer.projectRequired': 'Projet *',
  'rh.offer.countryRequired': 'Pays *',
  'rh.offer.deadlineRequired': 'Date limite *',
  'rh.offer.notificationEmails': 'E-mails de notification',
  'rh.offer.selectDepartment': 'Sélectionner un département',
  'rh.offer.selectProject': 'Sélectionner un projet',
  'rh.validation.departmentAndProjectRequired': 'Veuillez sélectionner à la fois le département et le projet',
  'rh.error.updateOffer': 'Échec de la mise à jour de l\'offre',
  
  // Offer creation translations
  'rh.offer.createTitle': 'Créer une nouvelle offre',
  'rh.offer.createSubtitle': 'Remplissez les détails de l\'offre ci-dessous',
  'rh.error.createOffer': 'Échec de la création de l\'offre',
  
  // Offer form field translations
  'rh.form.type': 'Type',
  'rh.form.title': 'Titre',
  'rh.form.reference': 'Référence',
  'rh.form.description': 'Description',
  'rh.form.descriptionPlaceholder': 'Entrez une description détaillée...',
  'rh.form.country': 'Pays',
  'rh.form.countryPlaceholder': 'Commencez à taper pour rechercher...',
  'rh.form.department': 'Département',
  'rh.form.departmentRequired': 'Département *',
  'rh.form.project': 'Projet',
  'rh.form.projectRequired': 'Projet *',
  'rh.form.deadline': 'Date limite',
  'rh.form.tdrDocument': 'Document TDR (PDF)',
  'rh.form.tdrOptional': 'Optionnel : Télécharger le document Termes de Référence (PDF uniquement)',
  'rh.form.notificationEmails': 'E-mails de notification',
  'rh.form.emailsCount': '{count} sur 10 e-mails',
  'rh.form.addEmail': 'Ajouter un e-mail',
  'rh.form.emailPlaceholder': 'Entrez l\'adresse e-mail {index}',
  'rh.form.emailsDescription': 'Ces adresses e-mail seront notifiées lorsque l\'offre est sur le point d\'expirer.',
  'rh.form.maxEmailsReached': 'Maximum de 10 e-mails de notification atteint',
  'rh.form.cancel': 'Annuler',
  'rh.form.createOffer': 'Créer une offre',
  'rh.form.updateOffer': 'Mettre à jour l\'offre',
  'rh.form.loading': 'Chargement...',
  'rh.form.noDepartmentsAvailable': 'Aucun département disponible',
  'rh.form.selectDepartment': 'Sélectionner un département...',
  'rh.form.noDepartmentsHelp': 'Aucun département disponible. Veuillez créer des départements d\'abord.',
  'rh.form.noProjectsAvailable': 'Aucun projet disponible',
  'rh.form.selectProject': 'Sélectionner un projet...',
  'rh.form.selectDepartmentFirst': 'Sélectionner un département d\'abord',
  'rh.form.noProjectsHelp': 'Aucun projet disponible dans ce département. Veuillez créer des projets d\'abord.',
  'rh.form.validation.selectDepartment': 'Veuillez sélectionner un département',
  'rh.form.validation.selectProject': 'Veuillez sélectionner un projet',
  'rh.form.validation.validEmails': 'Veuillez entrer des adresses e-mail valides pour tous les e-mails de notification.',
  'rh.form.error.saveOffer': 'Échec de l\'enregistrement de l\'offre',
  'rh.form.error.network': 'Erreur réseau lors de l\'enregistrement de l\'offre',
  
  // User form translations
  'user.form.nameRequired': 'Le nom est requis',
  'user.form.emailRequired': 'L\'e-mail est requis',
  'user.form.invalidEmail': 'E-mail invalide',
  'user.form.passwordMinLength': 'Minimum 6 caractères',
  'user.form.passwordsMustMatch': 'Les mots de passe doivent correspondre',
  'user.form.enterFullName': 'Entrez le nom complet',
  'user.form.emailAddress': 'Adresse e-mail',
  'user.form.enterEmailAddress': 'Entrez l\'adresse e-mail',
  'user.form.role': 'Rôle',
  'user.form.password': 'Mot de passe',
  'user.form.leaveBlankToKeep': 'Laissez vide pour conserver le mot de passe actuel',
  'user.form.enterPassword': 'Entrez le mot de passe',
  'user.form.confirmPassword': 'Confirmer le mot de passe',
  'user.form.reEnterPassword': 'Entrez à nouveau le mot de passe',
  'user.form.cancel': 'Annuler',
  'user.form.updateUser': 'Mettre à jour l\'utilisateur',
  'user.form.createUser': 'Créer un utilisateur',
};

const dictionaries: Record<Language, Translations> = { en, fr };

type I18nContextValue = {
  lang: Language;
  t: (key: string) => string;
  currentLangPrefix: '' | '/en' | '/fr';
};

const I18nContext = createContext<I18nContextValue>({
  lang: 'en',
  t: (key: string) => en[key] || key,
  currentLangPrefix: '',
});

export const LanguageProvider = ({ children }: { children: ReactNode }) => {
  const location = useLocation();
  const pathname = location.pathname || '/';
  const lang: Language = pathname.startsWith('/fr') ? 'fr' : pathname.startsWith('/en') ? 'en' : 'en';
  const currentLangPrefix: '' | '/en' | '/fr' = pathname.startsWith('/fr') ? '/fr' : pathname.startsWith('/en') ? '/en' : '';

  const value = useMemo<I18nContextValue>(() => {
    const dict = dictionaries[lang];
    const t = (key: string) => dict[key] || dictionaries.en[key] || key;
    return { lang, t, currentLangPrefix };
  }, [lang, currentLangPrefix]);

  return (
    <I18nContext.Provider value={value}>
      {children}
    </I18nContext.Provider>
  );
};

export const useI18n = () => useContext(I18nContext);